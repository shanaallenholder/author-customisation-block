{"version":3,"names":["_icons","require","_components","_i18n","_useSettings","_constants","_context","AspectRatioGroup","aspectRatios","isDisabled","label","onClick","value","_react","createElement","MenuGroup","map","name","slug","ratio","MenuItem","key","disabled","role","isSelected","icon","check","undefined","ratioToNumber","str","a","b","rest","split","Number","isNaN","length","NaN","presetRatioAsNumber","AspectRatioDropdown","toggleProps","isInProgress","aspect","setAspect","defaultAspect","useImageEditingContext","defaultRatios","themeRatios","showDefaultRatios","useSettings","DropdownMenu","aspectRatioIcon","__","popoverProps","POPOVER_PROPS","className","onClose","Fragment","newAspect","filter"],"sources":["@wordpress/block-editor/src/components/image-editor/aspect-ratio-dropdown.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nfunction AspectRatioGroup( {\n\taspectRatios,\n\tisDisabled,\n\tlabel,\n\tonClick,\n\tvalue,\n} ) {\n\treturn (\n\t\t<MenuGroup label={ label }>\n\t\t\t{ aspectRatios.map( ( { name, slug, ratio } ) => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonClick( ratio );\n\t\t\t\t\t} }\n\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\tisSelected={ ratio === value }\n\t\t\t\t\ticon={ ratio === value ? check : undefined }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t</MenuItem>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport function ratioToNumber( str ) {\n\t// TODO: support two-value aspect ratio?\n\t// https://css-tricks.com/almanac/properties/a/aspect-ratio/#aa-it-can-take-two-values\n\tconst [ a, b, ...rest ] = str.split( '/' ).map( Number );\n\tif (\n\t\ta <= 0 ||\n\t\tb <= 0 ||\n\t\tNumber.isNaN( a ) ||\n\t\tNumber.isNaN( b ) ||\n\t\trest.length\n\t) {\n\t\treturn NaN;\n\t}\n\treturn b ? a / b : a;\n}\n\nfunction presetRatioAsNumber( { ratio, ...rest } ) {\n\treturn {\n\t\tratio: ratioToNumber( ratio ),\n\t\t...rest,\n\t};\n}\n\nexport default function AspectRatioDropdown( { toggleProps } ) {\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\n\t\tuseImageEditingContext();\n\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\n\t\t'dimensions.aspectRatios.default',\n\t\t'dimensions.aspectRatios.theme',\n\t\t'dimensions.defaultAspectRatios'\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ aspectRatioIcon }\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ttoggleProps={ toggleProps }\n\t\t\tclassName=\"wp-block-image__aspect-ratio\"\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tslug: 'original',\n\t\t\t\t\t\t\t\tname: __( 'Original' ),\n\t\t\t\t\t\t\t\taspect: defaultAspect,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...( showDefaultRatios\n\t\t\t\t\t\t\t\t? defaultRatios\n\t\t\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio === 1 )\n\t\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t{ themeRatios?.length > 0 && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Theme' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ themeRatios }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio > 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio < 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"],"mappings":";;;;;;;;AAGA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,KAAA,GAAAF,OAAA;AAKA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,UAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAZA;AACA;AACA;;AAKA;AACA;AACA;;AAKA,SAASM,gBAAgBA,CAAE;EAC1BC,YAAY;EACZC,UAAU;EACVC,KAAK;EACLC,OAAO;EACPC;AACD,CAAC,EAAG;EACH,OACC,IAAAC,MAAA,CAAAC,aAAA,EAACZ,WAAA,CAAAa,SAAS;IAACL,KAAK,EAAGA;EAAO,GACvBF,YAAY,CAACQ,GAAG,CAAE,CAAE;IAAEC,IAAI;IAAEC,IAAI;IAAEC;EAAM,CAAC,KAC1C,IAAAN,MAAA,CAAAC,aAAA,EAACZ,WAAA,CAAAkB,QAAQ;IACRC,GAAG,EAAGH,IAAM;IACZI,QAAQ,EAAGb,UAAY;IACvBE,OAAO,EAAGA,CAAA,KAAM;MACfA,OAAO,CAAEQ,KAAM,CAAC;IACjB,CAAG;IACHI,IAAI,EAAC,eAAe;IACpBC,UAAU,EAAGL,KAAK,KAAKP,KAAO;IAC9Ba,IAAI,EAAGN,KAAK,KAAKP,KAAK,GAAGc,YAAK,GAAGC;EAAW,GAE1CV,IACO,CACT,CACQ,CAAC;AAEd;AAEO,SAASW,aAAaA,CAAEC,GAAG,EAAG;EACpC;EACA;EACA,MAAM,CAAEC,CAAC,EAAEC,CAAC,EAAE,GAAGC,IAAI,CAAE,GAAGH,GAAG,CAACI,KAAK,CAAE,GAAI,CAAC,CAACjB,GAAG,CAAEkB,MAAO,CAAC;EACxD,IACCJ,CAAC,IAAI,CAAC,IACNC,CAAC,IAAI,CAAC,IACNG,MAAM,CAACC,KAAK,CAAEL,CAAE,CAAC,IACjBI,MAAM,CAACC,KAAK,CAAEJ,CAAE,CAAC,IACjBC,IAAI,CAACI,MAAM,EACV;IACD,OAAOC,GAAG;EACX;EACA,OAAON,CAAC,GAAGD,CAAC,GAAGC,CAAC,GAAGD,CAAC;AACrB;AAEA,SAASQ,mBAAmBA,CAAE;EAAEnB,KAAK;EAAE,GAAGa;AAAK,CAAC,EAAG;EAClD,OAAO;IACNb,KAAK,EAAES,aAAa,CAAET,KAAM,CAAC;IAC7B,GAAGa;EACJ,CAAC;AACF;AAEe,SAASO,mBAAmBA,CAAE;EAAEC;AAAY,CAAC,EAAG;EAC9D,MAAM;IAAEC,YAAY;IAAEC,MAAM;IAAEC,SAAS;IAAEC;EAAc,CAAC,GACvD,IAAAC,+BAAsB,EAAC,CAAC;EAEzB,MAAM,CAAEC,aAAa,EAAEC,WAAW,EAAEC,iBAAiB,CAAE,GAAG,IAAAC,wBAAW,EACpE,iCAAiC,EACjC,+BAA+B,EAC/B,gCACD,CAAC;EAED,OACC,IAAApC,MAAA,CAAAC,aAAA,EAACZ,WAAA,CAAAgD,YAAY;IACZzB,IAAI,EAAG0B,kBAAiB;IACxBzC,KAAK,EAAG,IAAA0C,QAAE,EAAE,cAAe,CAAG;IAC9BC,YAAY,EAAGC,wBAAe;IAC9Bd,WAAW,EAAGA,WAAa;IAC3Be,SAAS,EAAC;EAA8B,GAEtC,CAAE;IAAEC;EAAQ,CAAC,KACd,IAAA3C,MAAA,CAAAC,aAAA,EAAAD,MAAA,CAAA4C,QAAA,QACC,IAAA5C,MAAA,CAAAC,aAAA,EAACP,gBAAgB;IAChBE,UAAU,EAAGgC,YAAc;IAC3B9B,OAAO,EAAK+C,SAAS,IAAM;MAC1Bf,SAAS,CAAEe,SAAU,CAAC;MACtBF,OAAO,CAAC,CAAC;IACV,CAAG;IACH5C,KAAK,EAAG8B,MAAQ;IAChBlC,YAAY,EAAG;IACd;IACA;MACCU,IAAI,EAAE,UAAU;MAChBD,IAAI,EAAE,IAAAmC,QAAE,EAAE,UAAW,CAAC;MACtBV,MAAM,EAAEE;IACT,CAAC,EACD,IAAKI,iBAAiB,GACnBF,aAAa,CACZ9B,GAAG,CAAEsB,mBAAoB,CAAC,CAC1BqB,MAAM,CAAE,CAAE;MAAExC;IAAM,CAAC,KAAMA,KAAK,KAAK,CAAE,CAAC,GACvC,EAAE,CAAE;EACL,CACH,CAAC,EACA4B,WAAW,EAAEX,MAAM,GAAG,CAAC,IACxB,IAAAvB,MAAA,CAAAC,aAAA,EAACP,gBAAgB;IAChBG,KAAK,EAAG,IAAA0C,QAAE,EAAE,OAAQ,CAAG;IACvB3C,UAAU,EAAGgC,YAAc;IAC3B9B,OAAO,EAAK+C,SAAS,IAAM;MAC1Bf,SAAS,CAAEe,SAAU,CAAC;MACtBF,OAAO,CAAC,CAAC;IACV,CAAG;IACH5C,KAAK,EAAG8B,MAAQ;IAChBlC,YAAY,EAAGuC;EAAa,CAC5B,CACD,EACCC,iBAAiB,IAClB,IAAAnC,MAAA,CAAAC,aAAA,EAACP,gBAAgB;IAChBG,KAAK,EAAG,IAAA0C,QAAE,EAAE,WAAY,CAAG;IAC3B3C,UAAU,EAAGgC,YAAc;IAC3B9B,OAAO,EAAK+C,SAAS,IAAM;MAC1Bf,SAAS,CAAEe,SAAU,CAAC;MACtBF,OAAO,CAAC,CAAC;IACV,CAAG;IACH5C,KAAK,EAAG8B,MAAQ;IAChBlC,YAAY,EAAGsC,aAAa,CAC1B9B,GAAG,CAAEsB,mBAAoB,CAAC,CAC1BqB,MAAM,CAAE,CAAE;MAAExC;IAAM,CAAC,KAAMA,KAAK,GAAG,CAAE;EAAG,CACxC,CACD,EACC6B,iBAAiB,IAClB,IAAAnC,MAAA,CAAAC,aAAA,EAACP,gBAAgB;IAChBG,KAAK,EAAG,IAAA0C,QAAE,EAAE,UAAW,CAAG;IAC1B3C,UAAU,EAAGgC,YAAc;IAC3B9B,OAAO,EAAK+C,SAAS,IAAM;MAC1Bf,SAAS,CAAEe,SAAU,CAAC;MACtBF,OAAO,CAAC,CAAC;IACV,CAAG;IACH5C,KAAK,EAAG8B,MAAQ;IAChBlC,YAAY,EAAGsC,aAAa,CAC1B9B,GAAG,CAAEsB,mBAAoB,CAAC,CAC1BqB,MAAM,CAAE,CAAE;MAAExC;IAAM,CAAC,KAAMA,KAAK,GAAG,CAAE;EAAG,CACxC,CAED,CAEU,CAAC;AAEjB","ignoreList":[]}