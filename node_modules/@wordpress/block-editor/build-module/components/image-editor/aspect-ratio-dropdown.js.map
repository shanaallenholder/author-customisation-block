{"version":3,"names":["check","aspectRatio","aspectRatioIcon","DropdownMenu","MenuGroup","MenuItem","__","useSettings","POPOVER_PROPS","useImageEditingContext","AspectRatioGroup","aspectRatios","isDisabled","label","onClick","value","createElement","map","name","slug","ratio","key","disabled","role","isSelected","icon","undefined","ratioToNumber","str","a","b","rest","split","Number","isNaN","length","NaN","presetRatioAsNumber","AspectRatioDropdown","toggleProps","isInProgress","aspect","setAspect","defaultAspect","defaultRatios","themeRatios","showDefaultRatios","popoverProps","className","onClose","Fragment","newAspect","filter"],"sources":["@wordpress/block-editor/src/components/image-editor/aspect-ratio-dropdown.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { check, aspectRatio as aspectRatioIcon } from '@wordpress/icons';\nimport { DropdownMenu, MenuGroup, MenuItem } from '@wordpress/components';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport { useSettings } from '../use-settings';\nimport { POPOVER_PROPS } from './constants';\nimport { useImageEditingContext } from './context';\n\nfunction AspectRatioGroup( {\n\taspectRatios,\n\tisDisabled,\n\tlabel,\n\tonClick,\n\tvalue,\n} ) {\n\treturn (\n\t\t<MenuGroup label={ label }>\n\t\t\t{ aspectRatios.map( ( { name, slug, ratio } ) => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={ slug }\n\t\t\t\t\tdisabled={ isDisabled }\n\t\t\t\t\tonClick={ () => {\n\t\t\t\t\t\tonClick( ratio );\n\t\t\t\t\t} }\n\t\t\t\t\trole=\"menuitemradio\"\n\t\t\t\t\tisSelected={ ratio === value }\n\t\t\t\t\ticon={ ratio === value ? check : undefined }\n\t\t\t\t>\n\t\t\t\t\t{ name }\n\t\t\t\t</MenuItem>\n\t\t\t) ) }\n\t\t</MenuGroup>\n\t);\n}\n\nexport function ratioToNumber( str ) {\n\t// TODO: support two-value aspect ratio?\n\t// https://css-tricks.com/almanac/properties/a/aspect-ratio/#aa-it-can-take-two-values\n\tconst [ a, b, ...rest ] = str.split( '/' ).map( Number );\n\tif (\n\t\ta <= 0 ||\n\t\tb <= 0 ||\n\t\tNumber.isNaN( a ) ||\n\t\tNumber.isNaN( b ) ||\n\t\trest.length\n\t) {\n\t\treturn NaN;\n\t}\n\treturn b ? a / b : a;\n}\n\nfunction presetRatioAsNumber( { ratio, ...rest } ) {\n\treturn {\n\t\tratio: ratioToNumber( ratio ),\n\t\t...rest,\n\t};\n}\n\nexport default function AspectRatioDropdown( { toggleProps } ) {\n\tconst { isInProgress, aspect, setAspect, defaultAspect } =\n\t\tuseImageEditingContext();\n\n\tconst [ defaultRatios, themeRatios, showDefaultRatios ] = useSettings(\n\t\t'dimensions.aspectRatios.default',\n\t\t'dimensions.aspectRatios.theme',\n\t\t'dimensions.defaultAspectRatios'\n\t);\n\n\treturn (\n\t\t<DropdownMenu\n\t\t\ticon={ aspectRatioIcon }\n\t\t\tlabel={ __( 'Aspect Ratio' ) }\n\t\t\tpopoverProps={ POPOVER_PROPS }\n\t\t\ttoggleProps={ toggleProps }\n\t\t\tclassName=\"wp-block-image__aspect-ratio\"\n\t\t>\n\t\t\t{ ( { onClose } ) => (\n\t\t\t\t<>\n\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t} }\n\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\taspectRatios={ [\n\t\t\t\t\t\t\t// All ratios should be mirrored in AspectRatioTool in @wordpress/block-editor.\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tslug: 'original',\n\t\t\t\t\t\t\t\tname: __( 'Original' ),\n\t\t\t\t\t\t\t\taspect: defaultAspect,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t...( showDefaultRatios\n\t\t\t\t\t\t\t\t? defaultRatios\n\t\t\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio === 1 )\n\t\t\t\t\t\t\t\t: [] ),\n\t\t\t\t\t\t] }\n\t\t\t\t\t/>\n\t\t\t\t\t{ themeRatios?.length > 0 && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Theme' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ themeRatios }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Landscape' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio > 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t\t{ showDefaultRatios && (\n\t\t\t\t\t\t<AspectRatioGroup\n\t\t\t\t\t\t\tlabel={ __( 'Portrait' ) }\n\t\t\t\t\t\t\tisDisabled={ isInProgress }\n\t\t\t\t\t\t\tonClick={ ( newAspect ) => {\n\t\t\t\t\t\t\t\tsetAspect( newAspect );\n\t\t\t\t\t\t\t\tonClose();\n\t\t\t\t\t\t\t} }\n\t\t\t\t\t\t\tvalue={ aspect }\n\t\t\t\t\t\t\taspectRatios={ defaultRatios\n\t\t\t\t\t\t\t\t.map( presetRatioAsNumber )\n\t\t\t\t\t\t\t\t.filter( ( { ratio } ) => ratio < 1 ) }\n\t\t\t\t\t\t/>\n\t\t\t\t\t) }\n\t\t\t\t</>\n\t\t\t) }\n\t\t</DropdownMenu>\n\t);\n}\n"],"mappings":"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","ignoreList":[]}