{"version":3,"sources":["@wordpress/rich-text/src/component/use-copy-handler.js"],"names":["useCopyHandler","record","multilineTag","preserveWhiteSpace","element","onCopy","event","current","contains","ownerDocument","activeElement","selectedRecord","plainText","html","value","clipboardData","setData","preventDefault","addEventListener","removeEventListener"],"mappings":";;;;;;;AAGA;;AAKA;;AACA;;AACA;;AACA;;AAXA;AACA;AACA;;AAGA;AACA;AACA;AAMO,SAASA,cAAT,OAAwE;AAAA,MAA7CC,MAA6C,QAA7CA,MAA6C;AAAA,MAArCC,YAAqC,QAArCA,YAAqC;AAAA,MAAvBC,kBAAuB,QAAvBA,kBAAuB;AAC9E,SAAO,2BACN,UAAEC,OAAF,EAAe;AACd,aAASC,MAAT,CAAiBC,KAAjB,EAAyB;AACxB,UACC,8BAAaL,MAAM,CAACM,OAApB,KACA,CAAEH,OAAO,CAACI,QAAR,CAAkBJ,OAAO,CAACK,aAAR,CAAsBC,aAAxC,CAFH,EAGE;AACD;AACA;;AAED,UAAMC,cAAc,GAAG,kBAAOV,MAAM,CAACM,OAAd,CAAvB;AACA,UAAMK,SAAS,GAAG,oCAAgBD,cAAhB,CAAlB;AACA,UAAME,IAAI,GAAG,gCAAc;AAC1BC,QAAAA,KAAK,EAAEH,cADmB;AAE1BT,QAAAA,YAAY,EAAZA,YAF0B;AAG1BC,QAAAA,kBAAkB,EAAlBA;AAH0B,OAAd,CAAb;AAKAG,MAAAA,KAAK,CAACS,aAAN,CAAoBC,OAApB,CAA6B,YAA7B,EAA2CJ,SAA3C;AACAN,MAAAA,KAAK,CAACS,aAAN,CAAoBC,OAApB,CAA6B,WAA7B,EAA0CH,IAA1C;AACAP,MAAAA,KAAK,CAACS,aAAN,CAAoBC,OAApB,CAA6B,WAA7B,EAA0C,MAA1C;AACAV,MAAAA,KAAK,CAACW,cAAN;AACA;;AAEDb,IAAAA,OAAO,CAACc,gBAAR,CAA0B,MAA1B,EAAkCb,MAAlC;AACA,WAAO,YAAM;AACZD,MAAAA,OAAO,CAACe,mBAAR,CAA6B,MAA7B,EAAqCd,MAArC;AACA,KAFD;AAGA,GA3BK,EA4BN,CAAEJ,MAAF,EAAUC,YAAV,EAAwBC,kBAAxB,CA5BM,CAAP;AA8BA","sourcesContent":["/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport { toHTMLString } from '../to-html-string';\nimport { isCollapsed } from '../is-collapsed';\nimport { slice } from '../slice';\nimport { getTextContent } from '../get-text-content';\n\nexport function useCopyHandler( { record, multilineTag, preserveWhiteSpace } ) {\n\treturn useRefEffect(\n\t\t( element ) => {\n\t\t\tfunction onCopy( event ) {\n\t\t\t\tif (\n\t\t\t\t\tisCollapsed( record.current ) ||\n\t\t\t\t\t! element.contains( element.ownerDocument.activeElement )\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst selectedRecord = slice( record.current );\n\t\t\t\tconst plainText = getTextContent( selectedRecord );\n\t\t\t\tconst html = toHTMLString( {\n\t\t\t\t\tvalue: selectedRecord,\n\t\t\t\t\tmultilineTag,\n\t\t\t\t\tpreserveWhiteSpace,\n\t\t\t\t} );\n\t\t\t\tevent.clipboardData.setData( 'text/plain', plainText );\n\t\t\t\tevent.clipboardData.setData( 'text/html', html );\n\t\t\t\tevent.clipboardData.setData( 'rich-text', 'true' );\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\telement.addEventListener( 'copy', onCopy );\n\t\t\treturn () => {\n\t\t\t\telement.removeEventListener( 'copy', onCopy );\n\t\t\t};\n\t\t},\n\t\t[ record, multilineTag, preserveWhiteSpace ]\n\t);\n}\n"]}