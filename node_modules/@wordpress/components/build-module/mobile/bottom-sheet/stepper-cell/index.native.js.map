{"version":3,"sources":["@wordpress/components/src/mobile/bottom-sheet/stepper-cell/index.native.js"],"names":["AccessibilityInfo","View","Platform","__","sprintf","Component","withPreferredColorScheme","Cell","Stepper","styles","RangeTextInput","toFixed","STEP_DELAY","DEFAULT_STEP","isIOS","OS","BottomSheetStepperCell","props","announceValue","bind","onDecrementValue","onDecrementValuePressIn","onIncrementValue","onIncrementValuePressIn","onPressOut","value","defaultValue","min","initialValue","state","inputValue","stepperValue","clearTimeout","timeout","clearInterval","interval","timeoutAnnounceValue","step","max","onChange","decimalNum","newValue","undefined","setState","setTimeout","startPressInterval","callback","speed","counter","setInterval","label","announceForAccessibility","icon","separatorType","children","shouldDisplayTextInput","preview","cellContainerStyle","isMinValue","isMaxValue","labelStyle","cellLabel","cellLabelNoIcon","accessibilityLabel","containerStyle","rowContainer","containerIOS","containerAndroid","name","event","nativeEvent","actionName","columnContainer","cellRowStyles","defaultProps"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport { AccessibilityInfo, View, Platform } from 'react-native';\n\n/**\n * WordPress dependencies\n */\nimport { __, sprintf } from '@wordpress/i18n';\nimport { Component } from '@wordpress/element';\nimport { withPreferredColorScheme } from '@wordpress/compose';\n\n/**\n * Internal dependencies\n */\nimport Cell from '../cell';\nimport Stepper from './stepper';\nimport styles from './style.scss';\nimport RangeTextInput from '../range-text-input';\nimport { toFixed } from '../../utils';\n\nconst STEP_DELAY = 200;\nconst DEFAULT_STEP = 1;\n\nconst isIOS = Platform.OS === 'ios';\n\nclass BottomSheetStepperCell extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\n\t\tthis.announceValue = this.announceValue.bind( this );\n\t\tthis.onDecrementValue = this.onDecrementValue.bind( this );\n\t\tthis.onDecrementValuePressIn = this.onDecrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onIncrementValue = this.onIncrementValue.bind( this );\n\t\tthis.onIncrementValuePressIn = this.onIncrementValuePressIn.bind(\n\t\t\tthis\n\t\t);\n\t\tthis.onPressOut = this.onPressOut.bind( this );\n\n\t\tconst { value, defaultValue, min } = props;\n\n\t\tconst initialValue = value || defaultValue || min;\n\n\t\tthis.state = {\n\t\t\tinputValue: initialValue,\n\t\t\tstepperValue: initialValue,\n\t\t};\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t\tclearTimeout( this.timeoutAnnounceValue );\n\t}\n\n\tonIncrementValue() {\n\t\tconst { step, max, onChange, value, decimalNum } = this.props;\n\t\tconst newValue = toFixed( value + step, decimalNum );\n\n\t\tif ( newValue <= max || max === undefined ) {\n\t\t\tonChange( newValue );\n\t\t\tthis.setState( {\n\t\t\t\tinputValue: newValue,\n\t\t\t} );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonDecrementValue() {\n\t\tconst { step, min, onChange, value, decimalNum } = this.props;\n\t\tconst newValue = toFixed( value - step, decimalNum );\n\n\t\tif ( newValue >= min ) {\n\t\t\tonChange( newValue );\n\t\t\tthis.setState( {\n\t\t\t\tinputValue: newValue,\n\t\t\t} );\n\t\t\tthis.announceValue( newValue );\n\t\t}\n\t}\n\n\tonIncrementValuePressIn() {\n\t\tthis.onIncrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onIncrementValue );\n\t\t}, 500 );\n\t}\n\n\tonDecrementValuePressIn() {\n\t\tthis.onDecrementValue();\n\t\tthis.timeout = setTimeout( () => {\n\t\t\tthis.startPressInterval( this.onDecrementValue );\n\t\t}, 500 );\n\t}\n\n\tonPressOut() {\n\t\tclearTimeout( this.timeout );\n\t\tclearInterval( this.interval );\n\t}\n\n\tstartPressInterval( callback, speed = STEP_DELAY ) {\n\t\tlet counter = 0;\n\t\tthis.interval = setInterval( () => {\n\t\t\tcallback();\n\t\t\tcounter += 1;\n\n\t\t\tif ( counter === 10 ) {\n\t\t\t\tclearInterval( this.interval );\n\t\t\t\tthis.startPressInterval( callback, speed / 2 );\n\t\t\t}\n\t\t}, speed );\n\t}\n\n\tannounceValue( value ) {\n\t\tconst { label } = this.props;\n\n\t\tif ( Platform.OS === 'ios' ) {\n\t\t\t// On Android it triggers the accessibilityLabel with the value change\n\t\t\tclearTimeout( this.timeoutAnnounceValue );\n\t\t\tthis.timeoutAnnounceValue = setTimeout( () => {\n\t\t\t\tAccessibilityInfo.announceForAccessibility(\n\t\t\t\t\t`${ value } ${ label }`\n\t\t\t\t);\n\t\t\t}, 300 );\n\t\t}\n\t}\n\n\trender() {\n\t\tconst {\n\t\t\tlabel,\n\t\t\ticon,\n\t\t\tmin,\n\t\t\tmax,\n\t\t\tvalue,\n\t\t\tseparatorType,\n\t\t\tchildren,\n\t\t\tshouldDisplayTextInput = false,\n\t\t\tpreview,\n\t\t\tonChange,\n\t\t\tdecimalNum,\n\t\t\tcellContainerStyle,\n\t\t} = this.props;\n\t\tconst { inputValue } = this.state;\n\t\tconst isMinValue = value === min;\n\t\tconst isMaxValue = value === max;\n\t\tconst labelStyle = [\n\t\t\tstyles.cellLabel,\n\t\t\t! icon ? styles.cellLabelNoIcon : {},\n\t\t];\n\t\tconst accessibilityLabel = sprintf(\n\t\t\t/* translators: accessibility text. Inform about current value. %1$s: Control label %2$s: Current value. */\n\t\t\t__( '%1$s. Current value is %2$s' ),\n\t\t\tlabel,\n\t\t\tvalue\n\t\t);\n\t\tconst containerStyle = [\n\t\t\tstyles.rowContainer,\n\t\t\tisIOS ? styles.containerIOS : styles.containerAndroid,\n\t\t];\n\n\t\treturn (\n\t\t\t<View\n\t\t\t\taccessible={ true }\n\t\t\t\taccessibilityRole=\"adjustable\"\n\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\taccessibilityActions={ [\n\t\t\t\t\t{ name: 'increment' },\n\t\t\t\t\t{ name: 'decrement' },\n\t\t\t\t] }\n\t\t\t\tonAccessibilityAction={ ( event ) => {\n\t\t\t\t\tswitch ( event.nativeEvent.actionName ) {\n\t\t\t\t\t\tcase 'increment':\n\t\t\t\t\t\t\tthis.onIncrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'decrement':\n\t\t\t\t\t\t\tthis.onDecrementValue();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} }\n\t\t\t>\n\t\t\t\t<Cell\n\t\t\t\t\taccessibilityRole=\"none\"\n\t\t\t\t\taccessible={ false }\n\t\t\t\t\tcellContainerStyle={ [\n\t\t\t\t\t\tstyles.cellContainerStyle,\n\t\t\t\t\t\tpreview && styles.columnContainer,\n\t\t\t\t\t\tcellContainerStyle,\n\t\t\t\t\t] }\n\t\t\t\t\tcellRowContainerStyle={\n\t\t\t\t\t\tpreview ? containerStyle : styles.cellRowStyles\n\t\t\t\t\t}\n\t\t\t\t\tdisabled={ true }\n\t\t\t\t\teditable={ false }\n\t\t\t\t\ticon={ icon }\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tlabelStyle={ labelStyle }\n\t\t\t\t\tleftAlign={ true }\n\t\t\t\t\tseparatorType={ separatorType }\n\t\t\t\t>\n\t\t\t\t\t<View style={ preview && containerStyle }>\n\t\t\t\t\t\t{ preview }\n\t\t\t\t\t\t<Stepper\n\t\t\t\t\t\t\tisMaxValue={ isMaxValue }\n\t\t\t\t\t\t\tisMinValue={ isMinValue }\n\t\t\t\t\t\t\tonPressInDecrement={ this.onDecrementValuePressIn }\n\t\t\t\t\t\t\tonPressInIncrement={ this.onIncrementValuePressIn }\n\t\t\t\t\t\t\tonPressOut={ this.onPressOut }\n\t\t\t\t\t\t\tvalue={ value }\n\t\t\t\t\t\t\tshouldDisplayTextInput={ shouldDisplayTextInput }\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{ shouldDisplayTextInput && (\n\t\t\t\t\t\t\t\t<RangeTextInput\n\t\t\t\t\t\t\t\t\tlabel={ label }\n\t\t\t\t\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\t\t\t\t\tdefaultValue={ `${ inputValue }` }\n\t\t\t\t\t\t\t\t\tvalue={ inputValue }\n\t\t\t\t\t\t\t\t\tmin={ min }\n\t\t\t\t\t\t\t\t\tstep={ 1 }\n\t\t\t\t\t\t\t\t\tdecimalNum={ decimalNum }\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{ children }\n\t\t\t\t\t\t\t\t</RangeTextInput>\n\t\t\t\t\t\t\t) }\n\t\t\t\t\t\t</Stepper>\n\t\t\t\t\t</View>\n\t\t\t\t</Cell>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nBottomSheetStepperCell.defaultProps = {\n\tstep: DEFAULT_STEP,\n};\n\nexport default withPreferredColorScheme( BottomSheetStepperCell );\n"]}