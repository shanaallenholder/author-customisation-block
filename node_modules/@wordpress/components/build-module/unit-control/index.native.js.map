{"version":3,"sources":["@wordpress/components/src/unit-control/index.native.js"],"names":["Text","View","TouchableWithoutFeedback","Platform","findNodeHandle","RangeCell","StepperCell","Picker","styles","CSS_UNITS","useRef","withPreferredColorScheme","__","sprintf","UnitControl","currentInput","label","value","onChange","onUnitChange","initialPosition","min","max","separatorType","units","unit","getStylesFromColorScheme","decimalNum","props","pickerRef","anchorNodeRef","onPickerPresent","current","presentPicker","currentInputValue","initialControlValue","isFinite","unitButtonTextStyle","unitButtonText","unitButtonTextDark","renderUnitButton","accessibilityHint","OS","accessibilityLabel","unitButton","getAnchor","undefined","renderUnitPicker","unitMenu"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport {\n\tText,\n\tView,\n\tTouchableWithoutFeedback,\n\tPlatform,\n\tfindNodeHandle,\n} from 'react-native';\n\n/**\n * Internal dependencies\n */\nimport RangeCell from '../mobile/bottom-sheet/range-cell';\nimport StepperCell from '../mobile/bottom-sheet/stepper-cell';\nimport Picker from '../mobile/picker';\nimport styles from './style.scss';\nimport { CSS_UNITS } from './utils';\n/**\n * WordPress dependencies\n */\nimport { useRef } from '@wordpress/element';\nimport { withPreferredColorScheme } from '@wordpress/compose';\nimport { __, sprintf } from '@wordpress/i18n';\n\nfunction UnitControl( {\n\tcurrentInput,\n\tlabel,\n\tvalue,\n\tonChange,\n\tonUnitChange,\n\tinitialPosition,\n\tmin,\n\tmax,\n\tseparatorType,\n\tunits = CSS_UNITS,\n\tunit,\n\tgetStylesFromColorScheme,\n\tdecimalNum,\n\t...props\n} ) {\n\tconst pickerRef = useRef();\n\tconst anchorNodeRef = useRef();\n\n\tfunction onPickerPresent() {\n\t\tif ( pickerRef?.current ) {\n\t\t\tpickerRef.current.presentPicker();\n\t\t}\n\t}\n\n\tconst currentInputValue = currentInput === null ? value : currentInput;\n\tconst initialControlValue = isFinite( currentInputValue )\n\t\t? currentInputValue\n\t\t: initialPosition;\n\n\tconst unitButtonTextStyle = getStylesFromColorScheme(\n\t\tstyles.unitButtonText,\n\t\tstyles.unitButtonTextDark\n\t);\n\n\tconst renderUnitButton = () => {\n\t\tconst accessibilityHint =\n\t\t\tPlatform.OS === 'ios'\n\t\t\t\t? __( 'Double tap to open Action Sheet with available options' )\n\t\t\t\t: __(\n\t\t\t\t\t\t'Double tap to open Bottom Sheet with available options'\n\t\t\t\t  );\n\n\t\t/* translators: accessibility text. Inform about current unit value. %s: Current unit value. */\n\t\tconst accessibilityLabel = sprintf( __( 'Current unit is %s' ), unit );\n\n\t\treturn (\n\t\t\t<TouchableWithoutFeedback\n\t\t\t\tonPress={ onPickerPresent }\n\t\t\t\taccessibilityLabel={ accessibilityLabel }\n\t\t\t\taccessibilityRole=\"button\"\n\t\t\t\taccessibilityHint={ accessibilityHint }\n\t\t\t>\n\t\t\t\t<View style={ styles.unitButton }>\n\t\t\t\t\t<Text style={ unitButtonTextStyle }>{ unit }</Text>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t);\n\t};\n\n\tconst getAnchor = () =>\n\t\tanchorNodeRef?.current\n\t\t\t? findNodeHandle( anchorNodeRef?.current )\n\t\t\t: undefined;\n\n\tconst renderUnitPicker = () => {\n\t\treturn (\n\t\t\t<View style={ styles.unitMenu } ref={ anchorNodeRef }>\n\t\t\t\t{ renderUnitButton() }\n\t\t\t\t<Picker\n\t\t\t\t\tref={ pickerRef }\n\t\t\t\t\toptions={ units }\n\t\t\t\t\tonChange={ onUnitChange }\n\t\t\t\t\thideCancelButton\n\t\t\t\t\tleftAlign\n\t\t\t\t\tgetAnchor={ getAnchor }\n\t\t\t\t/>\n\t\t\t</View>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{ unit !== '%' ? (\n\t\t\t\t<StepperCell\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tmax={ max }\n\t\t\t\t\tmin={ min }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tseparatorType={ separatorType }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tdefaultValue={ initialControlValue }\n\t\t\t\t\tshouldDisplayTextInput\n\t\t\t\t\tdecimalNum={ unit === 'px' ? 0 : decimalNum }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ renderUnitPicker() }\n\t\t\t\t</StepperCell>\n\t\t\t) : (\n\t\t\t\t<RangeCell\n\t\t\t\t\tlabel={ label }\n\t\t\t\t\tonChange={ onChange }\n\t\t\t\t\tminimumValue={ min }\n\t\t\t\t\tmaximumValue={ max }\n\t\t\t\t\tvalue={ value }\n\t\t\t\t\tdefaultValue={ initialControlValue }\n\t\t\t\t\tseparatorType={ separatorType }\n\t\t\t\t\tdecimalNum={ decimalNum }\n\t\t\t\t\t{ ...props }\n\t\t\t\t>\n\t\t\t\t\t{ renderUnitPicker() }\n\t\t\t\t</RangeCell>\n\t\t\t) }\n\t\t</>\n\t);\n}\n\nexport default withPreferredColorScheme( UnitControl );\n"]}