{"version":3,"sources":["@wordpress/components/src/popover/index.js"],"names":["classnames","mergeRefs","useRef","useState","useLayoutEffect","useCallback","getRectangleFromRange","ESCAPE","deprecated","useViewportMatch","useResizeObserver","useFocusOnMount","__experimentalUseFocusOutside","useFocusOutside","useConstrainedTabbing","useFocusReturn","close","computePopoverPosition","Button","ScrollLock","Slot","Fill","useSlot","getAnimateClassName","SLOT_NAME","offsetIframe","rect","ownerDocument","defaultView","frameElement","iframeRect","getBoundingClientRect","DOMRect","left","top","width","height","computeAnchorRect","anchorRefFallback","anchorRect","getAnchorRect","anchorRef","shouldAnchorIncludePadding","current","window","Range","Element","cloneRange","endContainer","withoutPadding","bottom","topRect","bottomRect","parentNode","getComputedStyle","node","element","paddingTop","paddingBottom","paddingLeft","paddingRight","parseInt","right","x","y","setAttribute","name","value","hasAttribute","removeAttribute","getAttribute","setStyle","property","style","setClass","toggle","classList","contains","add","remove","getAnchorDocument","anchor","Popover","headerTitle","onClose","onKeyDown","children","className","noArrow","isAlternate","position","range","focusOnMount","expandOnMobile","animate","onClickOutside","onFocusOutside","__unstableStickyBoundaryElement","__unstableSlotName","__unstableObserveElement","__unstableBoundaryParent","__unstableForcePosition","contentProps","contentRef","containerRef","isMobileViewport","animateOrigin","setAnimateOrigin","slot","isExpanded","containerResizeListener","contentSize","refresh","offsetParent","relativeOffsetTop","body","offsetParentRect","boundaryElement","closest","usedContentSize","popoverTop","popoverLeft","xAxis","yAxis","contentHeight","contentWidth","yAxisMapping","xAxisMapping","animateYAxis","animateXAxis","intervalHandle","setInterval","rafId","refreshOnAnimationFrame","cancelAnimationFrame","requestAnimationFrame","addEventListener","anchorDocument","observer","MutationObserver","observe","attributes","clearInterval","removeEventListener","disconnect","constrainedTabbingRef","focusReturnRef","focusOnMountRef","focusOutsideProps","handleOnFocusOutside","allRefs","mergedRefs","maybeClose","event","keyCode","stopPropagation","clickEvent","MouseEvent","error","document","createEvent","initMouseEvent","Object","defineProperty","get","relatedTarget","alternative","animateClassName","Boolean","type","origin","content","ref","PopoverContainer"],"mappings":"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","sourcesContent":["/**\n * External dependencies\n */\nimport classnames from 'classnames';\nimport mergeRefs from 'react-merge-refs';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseRef,\n\tuseState,\n\tuseLayoutEffect,\n\tuseCallback,\n} from '@wordpress/element';\nimport { getRectangleFromRange } from '@wordpress/dom';\nimport { ESCAPE } from '@wordpress/keycodes';\nimport deprecated from '@wordpress/deprecated';\nimport {\n\tuseViewportMatch,\n\tuseResizeObserver,\n\tuseFocusOnMount,\n\t__experimentalUseFocusOutside as useFocusOutside,\n\tuseConstrainedTabbing,\n\tuseFocusReturn,\n} from '@wordpress/compose';\nimport { close } from '@wordpress/icons';\n\n/**\n * Internal dependencies\n */\nimport { computePopoverPosition } from './utils';\nimport Button from '../button';\nimport ScrollLock from '../scroll-lock';\nimport { Slot, Fill, useSlot } from '../slot-fill';\nimport { getAnimateClassName } from '../animate';\n\n/**\n * Name of slot in which popover should fill.\n *\n * @type {string}\n */\nconst SLOT_NAME = 'Popover';\n\nfunction offsetIframe( rect, ownerDocument ) {\n\tconst { defaultView } = ownerDocument;\n\tconst { frameElement } = defaultView;\n\n\tif ( ! frameElement ) {\n\t\treturn rect;\n\t}\n\n\tconst iframeRect = frameElement.getBoundingClientRect();\n\n\treturn new defaultView.DOMRect(\n\t\trect.left + iframeRect.left,\n\t\trect.top + iframeRect.top,\n\t\trect.width,\n\t\trect.height\n\t);\n}\n\nfunction computeAnchorRect(\n\tanchorRefFallback,\n\tanchorRect,\n\tgetAnchorRect,\n\tanchorRef = false,\n\tshouldAnchorIncludePadding\n) {\n\tif ( anchorRect ) {\n\t\treturn anchorRect;\n\t}\n\n\tif ( getAnchorRect ) {\n\t\tif ( ! anchorRefFallback.current ) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn getAnchorRect( anchorRefFallback.current );\n\t}\n\n\tif ( anchorRef !== false ) {\n\t\tif (\n\t\t\t! anchorRef ||\n\t\t\t! window.Range ||\n\t\t\t! window.Element ||\n\t\t\t! window.DOMRect\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Duck-type to check if `anchorRef` is an instance of Range\n\t\t// `anchorRef instanceof window.Range` checks will break across document boundaries\n\t\t// such as in an iframe\n\t\tif ( typeof anchorRef?.cloneRange === 'function' ) {\n\t\t\treturn offsetIframe(\n\t\t\t\tgetRectangleFromRange( anchorRef ),\n\t\t\t\tanchorRef.endContainer.ownerDocument\n\t\t\t);\n\t\t}\n\n\t\t// Duck-type to check if `anchorRef` is an instance of Element\n\t\t// `anchorRef instanceof window.Element` checks will break across document boundaries\n\t\t// such as in an iframe\n\t\tif ( typeof anchorRef?.getBoundingClientRect === 'function' ) {\n\t\t\tconst rect = offsetIframe(\n\t\t\t\tanchorRef.getBoundingClientRect(),\n\t\t\t\tanchorRef.ownerDocument\n\t\t\t);\n\n\t\t\tif ( shouldAnchorIncludePadding ) {\n\t\t\t\treturn rect;\n\t\t\t}\n\n\t\t\treturn withoutPadding( rect, anchorRef );\n\t\t}\n\n\t\tconst { top, bottom } = anchorRef;\n\t\tconst topRect = top.getBoundingClientRect();\n\t\tconst bottomRect = bottom.getBoundingClientRect();\n\t\tconst rect = offsetIframe(\n\t\t\tnew window.DOMRect(\n\t\t\t\ttopRect.left,\n\t\t\t\ttopRect.top,\n\t\t\t\ttopRect.width,\n\t\t\t\tbottomRect.bottom - topRect.top\n\t\t\t),\n\t\t\ttop.ownerDocument\n\t\t);\n\n\t\tif ( shouldAnchorIncludePadding ) {\n\t\t\treturn rect;\n\t\t}\n\n\t\treturn withoutPadding( rect, anchorRef );\n\t}\n\n\tif ( ! anchorRefFallback.current ) {\n\t\treturn;\n\t}\n\n\tconst { parentNode } = anchorRefFallback.current;\n\tconst rect = parentNode.getBoundingClientRect();\n\n\tif ( shouldAnchorIncludePadding ) {\n\t\treturn rect;\n\t}\n\n\treturn withoutPadding( rect, parentNode );\n}\n\nfunction getComputedStyle( node ) {\n\treturn node.ownerDocument.defaultView.getComputedStyle( node );\n}\n\nfunction withoutPadding( rect, element ) {\n\tconst {\n\t\tpaddingTop,\n\t\tpaddingBottom,\n\t\tpaddingLeft,\n\t\tpaddingRight,\n\t} = getComputedStyle( element );\n\tconst top = paddingTop ? parseInt( paddingTop, 10 ) : 0;\n\tconst bottom = paddingBottom ? parseInt( paddingBottom, 10 ) : 0;\n\tconst left = paddingLeft ? parseInt( paddingLeft, 10 ) : 0;\n\tconst right = paddingRight ? parseInt( paddingRight, 10 ) : 0;\n\n\treturn {\n\t\tx: rect.left + left,\n\t\ty: rect.top + top,\n\t\twidth: rect.width - left - right,\n\t\theight: rect.height - top - bottom,\n\t\tleft: rect.left + left,\n\t\tright: rect.right - right,\n\t\ttop: rect.top + top,\n\t\tbottom: rect.bottom - bottom,\n\t};\n}\n\n/**\n * Sets or removes an element attribute.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The attribute name to set or remove.\n * @param {?string} value   The value to set. A falsy value will remove the\n *                          attribute.\n */\nfunction setAttribute( element, name, value ) {\n\tif ( ! value ) {\n\t\tif ( element.hasAttribute( name ) ) {\n\t\t\telement.removeAttribute( name );\n\t\t}\n\t} else if ( element.getAttribute( name ) !== value ) {\n\t\telement.setAttribute( name, value );\n\t}\n}\n\n/**\n * Sets or removes an element style property.\n *\n * @param {Element} element  The element to modify.\n * @param {string}  property The property to set or remove.\n * @param {?string} value    The value to set. A falsy value will remove the\n *                           property.\n */\nfunction setStyle( element, property, value = '' ) {\n\tif ( element.style[ property ] !== value ) {\n\t\telement.style[ property ] = value;\n\t}\n}\n\n/**\n * Sets or removes an element class.\n *\n * @param {Element} element The element to modify.\n * @param {string}  name    The class to set or remove.\n * @param {boolean} toggle  True to set the class, false to remove.\n */\nfunction setClass( element, name, toggle ) {\n\tif ( toggle ) {\n\t\tif ( ! element.classList.contains( name ) ) {\n\t\t\telement.classList.add( name );\n\t\t}\n\t} else if ( element.classList.contains( name ) ) {\n\t\telement.classList.remove( name );\n\t}\n}\n\nfunction getAnchorDocument( anchor ) {\n\tif ( ! anchor ) {\n\t\treturn;\n\t}\n\n\tif ( anchor.endContainer ) {\n\t\treturn anchor.endContainer.ownerDocument;\n\t}\n\n\tif ( anchor.top ) {\n\t\treturn anchor.top.ownerDocument;\n\t}\n\n\treturn anchor.ownerDocument;\n}\n\nconst Popover = ( {\n\theaderTitle,\n\tonClose,\n\tonKeyDown,\n\tchildren,\n\tclassName,\n\tnoArrow = true,\n\tisAlternate,\n\t// Disable reason: We generate the `...contentProps` rest as remainder\n\t// of props which aren't explicitly handled by this component.\n\t/* eslint-disable no-unused-vars */\n\tposition = 'bottom right',\n\trange,\n\tfocusOnMount = 'firstElement',\n\tanchorRef,\n\tshouldAnchorIncludePadding,\n\tanchorRect,\n\tgetAnchorRect,\n\texpandOnMobile,\n\tanimate = true,\n\tonClickOutside,\n\tonFocusOutside,\n\t__unstableStickyBoundaryElement,\n\t__unstableSlotName = SLOT_NAME,\n\t__unstableObserveElement,\n\t__unstableBoundaryParent,\n\t__unstableForcePosition,\n\t/* eslint-enable no-unused-vars */\n\t...contentProps\n} ) => {\n\tconst anchorRefFallback = useRef( null );\n\tconst contentRef = useRef( null );\n\tconst containerRef = useRef();\n\tconst isMobileViewport = useViewportMatch( 'medium', '<' );\n\tconst [ animateOrigin, setAnimateOrigin ] = useState();\n\tconst slot = useSlot( __unstableSlotName );\n\tconst isExpanded = expandOnMobile && isMobileViewport;\n\tconst [ containerResizeListener, contentSize ] = useResizeObserver();\n\tnoArrow = isExpanded || noArrow;\n\n\tuseLayoutEffect( () => {\n\t\tif ( isExpanded ) {\n\t\t\tsetClass( containerRef.current, 'is-without-arrow', noArrow );\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis' );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis' );\n\t\t\tsetStyle( containerRef.current, 'top' );\n\t\t\tsetStyle( containerRef.current, 'left' );\n\t\t\tsetStyle( contentRef.current, 'maxHeight' );\n\t\t\tsetStyle( contentRef.current, 'maxWidth' );\n\t\t\treturn;\n\t\t}\n\n\t\tconst refresh = () => {\n\t\t\tif ( ! containerRef.current || ! contentRef.current ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet anchor = computeAnchorRect(\n\t\t\t\tanchorRefFallback,\n\t\t\t\tanchorRect,\n\t\t\t\tgetAnchorRect,\n\t\t\t\tanchorRef,\n\t\t\t\tshouldAnchorIncludePadding\n\t\t\t);\n\n\t\t\tif ( ! anchor ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { offsetParent, ownerDocument } = containerRef.current;\n\n\t\t\tlet relativeOffsetTop = 0;\n\n\t\t\t// If there is a positioned ancestor element that is not the body,\n\t\t\t// subtract the position from the anchor rect. If the position of\n\t\t\t// the popover is fixed, the offset parent is null or the body\n\t\t\t// element, in which case the position is relative to the viewport.\n\t\t\t// See https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n\t\t\tif ( offsetParent && offsetParent !== ownerDocument.body ) {\n\t\t\t\tconst offsetParentRect = offsetParent.getBoundingClientRect();\n\n\t\t\t\trelativeOffsetTop = offsetParentRect.top;\n\t\t\t\tanchor = new window.DOMRect(\n\t\t\t\t\tanchor.left - offsetParentRect.left,\n\t\t\t\t\tanchor.top - offsetParentRect.top,\n\t\t\t\t\tanchor.width,\n\t\t\t\t\tanchor.height\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet boundaryElement;\n\t\t\tif ( __unstableBoundaryParent ) {\n\t\t\t\tboundaryElement = containerRef.current.closest(\n\t\t\t\t\t'.popover-slot'\n\t\t\t\t)?.parentNode;\n\t\t\t}\n\n\t\t\tconst usedContentSize = ! contentSize.height\n\t\t\t\t? contentRef.current.getBoundingClientRect()\n\t\t\t\t: contentSize;\n\n\t\t\tconst {\n\t\t\t\tpopoverTop,\n\t\t\t\tpopoverLeft,\n\t\t\t\txAxis,\n\t\t\t\tyAxis,\n\t\t\t\tcontentHeight,\n\t\t\t\tcontentWidth,\n\t\t\t} = computePopoverPosition(\n\t\t\t\tanchor,\n\t\t\t\tusedContentSize,\n\t\t\t\tposition,\n\t\t\t\t__unstableStickyBoundaryElement,\n\t\t\t\tcontainerRef.current,\n\t\t\t\trelativeOffsetTop,\n\t\t\t\tboundaryElement,\n\t\t\t\t__unstableForcePosition\n\t\t\t);\n\n\t\t\tif (\n\t\t\t\ttypeof popoverTop === 'number' &&\n\t\t\t\ttypeof popoverLeft === 'number'\n\t\t\t) {\n\t\t\t\tsetStyle( containerRef.current, 'top', popoverTop + 'px' );\n\t\t\t\tsetStyle( containerRef.current, 'left', popoverLeft + 'px' );\n\t\t\t}\n\n\t\t\tsetClass(\n\t\t\t\tcontainerRef.current,\n\t\t\t\t'is-without-arrow',\n\t\t\t\tnoArrow || ( xAxis === 'center' && yAxis === 'middle' )\n\t\t\t);\n\t\t\tsetClass( containerRef.current, 'is-alternate', isAlternate );\n\t\t\tsetAttribute( containerRef.current, 'data-x-axis', xAxis );\n\t\t\tsetAttribute( containerRef.current, 'data-y-axis', yAxis );\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxHeight',\n\t\t\t\ttypeof contentHeight === 'number' ? contentHeight + 'px' : ''\n\t\t\t);\n\t\t\tsetStyle(\n\t\t\t\tcontentRef.current,\n\t\t\t\t'maxWidth',\n\t\t\t\ttypeof contentWidth === 'number' ? contentWidth + 'px' : ''\n\t\t\t);\n\n\t\t\t// Compute the animation position\n\t\t\tconst yAxisMapping = {\n\t\t\t\ttop: 'bottom',\n\t\t\t\tbottom: 'top',\n\t\t\t};\n\t\t\tconst xAxisMapping = {\n\t\t\t\tleft: 'right',\n\t\t\t\tright: 'left',\n\t\t\t};\n\t\t\tconst animateYAxis = yAxisMapping[ yAxis ] || 'middle';\n\t\t\tconst animateXAxis = xAxisMapping[ xAxis ] || 'center';\n\n\t\t\tsetAnimateOrigin( animateXAxis + ' ' + animateYAxis );\n\t\t};\n\n\t\trefresh();\n\n\t\tconst { ownerDocument } = containerRef.current;\n\t\tconst { defaultView } = ownerDocument;\n\n\t\t/*\n\t\t * There are sometimes we need to reposition or resize the popover that\n\t\t * are not handled by the resize/scroll window events (i.e. CSS changes\n\t\t * in the layout that changes the position of the anchor).\n\t\t *\n\t\t * For these situations, we refresh the popover every 0.5s\n\t\t */\n\t\tconst intervalHandle = defaultView.setInterval( refresh, 500 );\n\n\t\tlet rafId;\n\n\t\tconst refreshOnAnimationFrame = () => {\n\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\t\t\trafId = defaultView.requestAnimationFrame( refresh );\n\t\t};\n\n\t\t// Sometimes a click trigger a layout change that affects the popover\n\t\t// position. This is an opportunity to immediately refresh rather than\n\t\t// at the interval.\n\t\tdefaultView.addEventListener( 'click', refreshOnAnimationFrame );\n\t\tdefaultView.addEventListener( 'resize', refresh );\n\t\tdefaultView.addEventListener( 'scroll', refresh, true );\n\n\t\tconst anchorDocument = getAnchorDocument( anchorRef );\n\n\t\t// If the anchor is within an iframe, the popover position also needs\n\t\t// to refrest when the iframe content is scrolled or resized.\n\t\tif ( anchorDocument && anchorDocument !== ownerDocument ) {\n\t\t\tanchorDocument.defaultView.addEventListener( 'resize', refresh );\n\t\t\tanchorDocument.defaultView.addEventListener(\n\t\t\t\t'scroll',\n\t\t\t\trefresh,\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tlet observer;\n\n\t\tif ( __unstableObserveElement ) {\n\t\t\tobserver = new defaultView.MutationObserver( refresh );\n\t\t\tobserver.observe( __unstableObserveElement, { attributes: true } );\n\t\t}\n\n\t\treturn () => {\n\t\t\tdefaultView.clearInterval( intervalHandle );\n\t\t\tdefaultView.removeEventListener( 'resize', refresh );\n\t\t\tdefaultView.removeEventListener( 'scroll', refresh, true );\n\t\t\tdefaultView.removeEventListener( 'click', refreshOnAnimationFrame );\n\t\t\tdefaultView.cancelAnimationFrame( rafId );\n\n\t\t\tif ( anchorDocument && anchorDocument !== ownerDocument ) {\n\t\t\t\tanchorDocument.defaultView.removeEventListener(\n\t\t\t\t\t'resize',\n\t\t\t\t\trefresh\n\t\t\t\t);\n\t\t\t\tanchorDocument.defaultView.removeEventListener(\n\t\t\t\t\t'scroll',\n\t\t\t\t\trefresh,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif ( observer ) {\n\t\t\t\tobserver.disconnect();\n\t\t\t}\n\t\t};\n\t}, [\n\t\tisExpanded,\n\t\tanchorRect,\n\t\tgetAnchorRect,\n\t\tanchorRef,\n\t\tshouldAnchorIncludePadding,\n\t\tposition,\n\t\tcontentSize,\n\t\t__unstableStickyBoundaryElement,\n\t\t__unstableObserveElement,\n\t\t__unstableBoundaryParent,\n\t] );\n\n\tconst constrainedTabbingRef = useConstrainedTabbing();\n\tconst focusReturnRef = useFocusReturn();\n\tconst focusOnMountRef = useFocusOnMount( focusOnMount );\n\tconst focusOutsideProps = useFocusOutside( handleOnFocusOutside );\n\tconst allRefs = [\n\t\tcontainerRef,\n\t\tfocusOnMount ? constrainedTabbingRef : null,\n\t\tfocusOnMount ? focusReturnRef : null,\n\t\tfocusOnMount ? focusOnMountRef : null,\n\t];\n\tconst mergedRefs = useCallback( mergeRefs( allRefs ), allRefs );\n\n\t// Event handlers\n\tconst maybeClose = ( event ) => {\n\t\t// Close on escape\n\t\tif ( event.keyCode === ESCAPE && onClose ) {\n\t\t\tevent.stopPropagation();\n\t\t\tonClose();\n\t\t}\n\n\t\t// Preserve original content prop behavior\n\t\tif ( onKeyDown ) {\n\t\t\tonKeyDown( event );\n\t\t}\n\t};\n\n\t/**\n\t * Shims an onFocusOutside callback to be compatible with a deprecated\n\t * onClickOutside prop function, if provided.\n\t *\n\t * @param {FocusEvent} event Focus event from onFocusOutside.\n\t */\n\tfunction handleOnFocusOutside( event ) {\n\t\t// Defer to given `onFocusOutside` if specified. Call `onClose` only if\n\t\t// both `onFocusOutside` and `onClickOutside` are unspecified. Doing so\n\t\t// assures backwards-compatibility for prior `onClickOutside` default.\n\t\tif ( onFocusOutside ) {\n\t\t\tonFocusOutside( event );\n\t\t\treturn;\n\t\t} else if ( ! onClickOutside ) {\n\t\t\tif ( onClose ) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t// Simulate MouseEvent using FocusEvent#relatedTarget as emulated click\n\t\t// target. MouseEvent constructor is unsupported in Internet Explorer.\n\t\tlet clickEvent;\n\t\ttry {\n\t\t\tclickEvent = new window.MouseEvent( 'click' );\n\t\t} catch ( error ) {\n\t\t\tclickEvent = document.createEvent( 'MouseEvent' );\n\t\t\tclickEvent.initMouseEvent(\n\t\t\t\t'click',\n\t\t\t\ttrue,\n\t\t\t\ttrue,\n\t\t\t\twindow,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\tfalse,\n\t\t\t\t0,\n\t\t\t\tnull\n\t\t\t);\n\t\t}\n\n\t\tObject.defineProperty( clickEvent, 'target', {\n\t\t\tget: () => event.relatedTarget,\n\t\t} );\n\n\t\tdeprecated( 'Popover onClickOutside prop', {\n\t\t\talternative: 'onFocusOutside',\n\t\t} );\n\n\t\tonClickOutside( clickEvent );\n\t}\n\n\t/** @type {false | string} */\n\tconst animateClassName =\n\t\tBoolean( animate && animateOrigin ) &&\n\t\tgetAnimateClassName( {\n\t\t\ttype: 'appear',\n\t\t\torigin: animateOrigin,\n\t\t} );\n\n\t// Disable reason: We care to capture the _bubbled_ events from inputs\n\t// within popover as inferring close intent.\n\n\tlet content = (\n\t\t// eslint-disable-next-line jsx-a11y/no-noninteractive-element-interactions\n\t\t// eslint-disable-next-line jsx-a11y/no-static-element-interactions\n\t\t<div\n\t\t\tclassName={ classnames(\n\t\t\t\t'components-popover',\n\t\t\t\tclassName,\n\t\t\t\tanimateClassName,\n\t\t\t\t{\n\t\t\t\t\t'is-expanded': isExpanded,\n\t\t\t\t\t'is-without-arrow': noArrow,\n\t\t\t\t\t'is-alternate': isAlternate,\n\t\t\t\t}\n\t\t\t) }\n\t\t\t{ ...contentProps }\n\t\t\tonKeyDown={ maybeClose }\n\t\t\t{ ...focusOutsideProps }\n\t\t\tref={ mergedRefs }\n\t\t\ttabIndex=\"-1\"\n\t\t>\n\t\t\t{ isExpanded && <ScrollLock /> }\n\t\t\t{ isExpanded && (\n\t\t\t\t<div className=\"components-popover__header\">\n\t\t\t\t\t<span className=\"components-popover__header-title\">\n\t\t\t\t\t\t{ headerTitle }\n\t\t\t\t\t</span>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"components-popover__close\"\n\t\t\t\t\t\ticon={ close }\n\t\t\t\t\t\tonClick={ onClose }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t) }\n\t\t\t<div ref={ contentRef } className=\"components-popover__content\">\n\t\t\t\t<div style={ { position: 'relative' } }>\n\t\t\t\t\t{ containerResizeListener }\n\t\t\t\t\t{ children }\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n\n\tif ( slot.ref ) {\n\t\tcontent = <Fill name={ __unstableSlotName }>{ content }</Fill>;\n\t}\n\n\tif ( anchorRef || anchorRect ) {\n\t\treturn content;\n\t}\n\n\treturn <span ref={ anchorRefFallback }>{ content }</span>;\n};\n\nconst PopoverContainer = Popover;\n\nPopoverContainer.Slot = ( { name = SLOT_NAME } ) => (\n\t<Slot bubblesVirtually name={ name } className=\"popover-slot\" />\n);\n\nexport default PopoverContainer;\n"]}